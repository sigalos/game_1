<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Desafio Nerd - Quiz e Mini Jogos</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #121212;
      background-image: url('https://cdn.pixabay.com/photo/2021/11/18/14/29/cat-6805410_1280.jpg');
      background-size: cover;
      background-position: center;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      backdrop-filter: brightness(0.4);
    }

    .quiz-container, .game-container {
      max-width: 90%;
      background-color: rgba(30, 30, 30, 0.9);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
      display: none;
    }

    .question {
      font-size: 1.2em;
      margin-bottom: 15px;
    }

    .options button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      background-color: #333;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1em;
    }

    .options button:hover {
      background-color: #555;
      cursor: pointer;
    }

    canvas {
      background: #222;
      margin-top: 20px;
    }

    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, 60px);
      gap: 10px;
      margin-top: 20px;
    }

    .memory-card {
      width: 60px;
      height: 60px;
      background-color: #333;
      color: white;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h1>Desafio Nerd - Quiz e Mini Jogos</h1>
  <div class="quiz-container" id="quiz">
    <div class="question" id="question">Carregando pergunta...</div>
    <div class="options" id="options"></div>
  </div>

  <div class="game-container" id="game1">
    <h2>Mini Quebra-Cabe√ßa</h2>
    <canvas id="puzzleCanvas" width="300" height="300"></canvas>
    <p>Toque para mover as pe√ßas!</p>
    <button onclick="startPuzzle()">Reiniciar Quebra-Cabe√ßa</button>
    <button onclick="nextQuiz()">Pr√≥xima Pergunta</button>
  </div>

  <div class="game-container" id="game2">
    <h2>Mini Jogo da Velha</h2>
    <div id="ticTacToe" style="display: grid; grid-template-columns: repeat(3, 100px); gap: 5px; margin-top: 20px;"></div>
    <button onclick="nextQuiz()">Pr√≥xima Pergunta</button>
  </div>

  <div class="game-container" id="game3">
    <h2>Mini Jogo da Mem√≥ria</h2>
    <div class="memory-grid" id="memoryGame"></div>
    <button onclick="nextQuiz()">Pr√≥xima Pergunta</button>
  </div>

  <audio id="successSound" src="https://cdn.pixabay.com/audio/2021/08/04/audio_fcc61ba957.mp3"></audio>
  <audio id="errorSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_d841b4b395.mp3"></audio>

  <script>
    const questions = [
      {
        question: "Qual evento aconteceu em 2024?",
        options: ["Copa do Mundo no Brasil", "Elei√ß√µes presidenciais nos EUA", "Descobrimento do Brasil", "Primeiro homem na Lua"],
        answer: 1
      },
      {
        question: "Qual √© o nome do v√≠rus que causou a pandemia de 2020?",
        options: ["Zika", "Influenza", "Covid-19", "Ebola"],
        answer: 2
      },
      {
        question: "O que √© intelig√™ncia artificial?",
        options: ["Um rob√¥ que cozinha", "Tecnologia que simula intelig√™ncia humana", "Um jogo de computador", "Um tipo de rede social"],
        answer: 1
      }
    ];

    let currentQuestion = 0;
    const quizEl = document.getElementById('quiz');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const successSound = document.getElementById('successSound');
    const errorSound = document.getElementById('errorSound');
    const games = ["game1", "game2", "game3"];

    function loadQuestion() {
      quizEl.style.display = 'block';
      games.forEach(id => document.getElementById(id).style.display = 'none');
      const q = questions[currentQuestion];
      questionEl.textContent = q.question;
      optionsEl.innerHTML = '';
      q.options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.textContent = option;
        btn.onclick = () => checkAnswer(index);
        optionsEl.appendChild(btn);
      });
    }

    function checkAnswer(selected) {
      errorSound.pause();
      errorSound.currentTime = 0;
      successSound.pause();
      successSound.currentTime = 0;

      if (selected === questions[currentQuestion].answer) {
        successSound.play();
        quizEl.style.display = 'none';
        launchMiniGame(currentQuestion);
      } else {
        errorSound.play();
        navigator.vibrate(300);
        alert('Resposta incorreta. Tente novamente!');
      }
    }

    function nextQuiz() {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        loadQuestion();
      } else {
        alert("Parab√©ns! Voc√™ completou todas as fases!");
      }
    }

    function launchMiniGame(index) {
      const gameId = games[index % games.length];
      document.getElementById(gameId).style.display = 'block';
      if (gameId === "game1") startPuzzle();
      if (gameId === "game2") startTicTacToe();
      if (gameId === "game3") startMemoryGame();
    }

    function startPuzzle() {
      const canvas = document.getElementById("puzzleCanvas");
      const ctx = canvas.getContext("2d");
      const img = new Image();
      img.src = "https://cdn.pixabay.com/photo/2017/01/06/19/15/cat-1958371_1280.jpg";

      img.onload = () => {
        const size = 3;
        const tileSize = canvas.width / size;
        const tiles = [];
        for (let y = 0; y < size; y++) {
          for (let x = 0; x < size; x++) {
            tiles.push({ x, y });
          }
        }
        tiles.sort(() => Math.random() - 0.5);

        canvas.onclick = e => {
          const col = Math.floor(e.offsetX / tileSize);
          const row = Math.floor(e.offsetY / tileSize);
          const idx = row * size + col;
          tiles[idx] = tiles[(idx + 1) % tiles.length];
          draw();
        };

        function draw() {
          for (let i = 0; i < tiles.length; i++) {
            const sx = tiles[i].x * tileSize;
            const sy = tiles[i].y * tileSize;
            const dx = (i % size) * tileSize;
            const dy = Math.floor(i / size) * tileSize;
            ctx.drawImage(img, sx, sy, tileSize, tileSize, dx, dy, tileSize, tileSize);
          }
        }
        draw();
      };
    }

    function startTicTacToe() {
      const grid = document.getElementById("ticTacToe");
      grid.innerHTML = "";
      const cells = Array(9).fill(null);

      cells.forEach((_, i) => {
        const cell = document.createElement("div");
        cell.style.height = "100px";
        cell.style.display = "flex";
        cell.style.alignItems = "center";
        cell.style.justifyContent = "center";
        cell.style.fontSize = "2em";
        cell.style.backgroundColor = "#444";
        cell.style.borderRadius = "8px";
        cell.style.cursor = "pointer";

        cell.onclick = () => {
          if (!cells[i]) {
            cells[i] = "X";
            cell.textContent = "X";
            setTimeout(() => makeAIMove(cells, grid), 500);
          }
        };
        grid.appendChild(cell);
      });
    }

    function makeAIMove(cells, grid) {
      const emptyIndexes = cells.map((v, i) => v ? null : i).filter(v => v !== null);
      if (emptyIndexes.length === 0) return;
      const move = emptyIndexes[Math.floor(Math.random() * emptyIndexes.length)];
      cells[move] = "O";
      grid.children[move].textContent = "O";
    }

    function startMemoryGame() {
      const container = document.getElementById("memoryGame");
      container.innerHTML = "";
      const emojis = ["üê±", "üê∂", "üê∞", "ü¶ä", "üêº", "üêµ"].flatMap(e => [e, e]);
      emojis.sort(() => Math.random() - 0.5);

      let selected = [];
      emojis.forEach((emoji, i) => {
        const card = document.createElement("div");
        card.className = "memory-card";
        card.dataset.index = i;
        card.dataset.emoji = emoji;
        card.onclick = () => {
          if (card.textContent || selected.length === 2) return;
          card.textContent = emoji;
          selected.push(card);
          if (selected.length === 2) {
            setTimeout(() => {
              if (selected[0].dataset.emoji !== selected[1].dataset.emoji) {
                selected[0].textContent = "";
                selected[1].textContent = "";
              }
              selected = [];
            }, 1000);
          }
        };
        container.appendChild(card);
      });
    }

    loadQuestion();
  </script>
</body>
</html>
